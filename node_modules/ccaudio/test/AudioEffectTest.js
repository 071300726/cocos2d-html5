var AudioEffectTest = cc.Layer.extend({
    _effectId : null,
    init : function(){
        this._super();
        custDiv.innerHTML = "";
        var self = this;

        audioEngine = cc.AudioEngine.getInstance();

        this._logVolume();

        this._createCustBtn("Play", function(){
            self._effectId = audioEngine.playEffect(res.effect2_mp3, false);
        });
        this._createCustBtn("Pause", function(){
            audioEngine.pauseEffect(self._effectId);
        });
        this._createCustBtn("Stop", function(){
            audioEngine.stopEffect(self._effectId);
        });
        this._createCustBtn("Play in loop", function(){
            self._effectId = audioEngine.playEffect(res.effect2_mp3, true);
        });
        this._createCustBtn("Resume", function(){
            audioEngine.resumeEffect(self._effectId);
        });
        this._createCustBtn("Unload", function(){
            audioEngine.unloadEffect(res.effect2_mp3);
        })
        this._createCustBtn("Pause all", function(){
            audioEngine.pauseAllEffects();
        });
        this._createCustBtn("Stop all", function(){
            audioEngine.stopAllEffects();
        });
        this._createCustBtn("Resume all", function(){
            audioEngine.resumeAllEffects();
        });
        this._createCustBtn("Volume up", function(){
            audioEngine.setEffectsVolume(audioEngine.getEffectsVolume() + 0.1);
            self._logVolume();
        });
        this._createCustBtn("Volume down", function(){
            audioEngine.setEffectsVolume(audioEngine.getEffectsVolume() - 0.1);
            self._logVolume();
        });

        return true;
    },

    _logVolume : function(){
        logTest("Current volume is : " + audioEngine.getEffectsVolume());
    },

    onExit : function(){
        audioEngine.stopAllEffects();
        audioEngine.unloadEffect(res.effect2_mp3);
        custDiv.innerHTML = "";
    },

    _createCustBtn : function(text, func){
        var playBtn = document.createElement("button");
        playBtn.innerHTML = text;
        custDiv.appendChild(playBtn);
        playBtn.addEventListener("click", func);
    }
});
AudioEffectTest.create = function(args){
    var layer = new AudioEffectTest();
    layer.init();
    return layer;
} 